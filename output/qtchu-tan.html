<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Qt初探 &mdash; leelongcrazy's blog</title>
  <meta name="author" content="leelongcrazy">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="/favicon.png" rel="icon">

  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">leelongcrazy's blog</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="/category/article.html">Article</a>
      </li>
      <li >
        <a href="/category/books.html">Books</a>
      </li>
      <li class="active">
        <a href="/category/cpp.html">Cpp</a>
      </li>
      <li >
        <a href="/category/import.html">Import</a>
      </li>
      <li >
        <a href="/category/it.html">It</a>
      </li>
      <li >
        <a href="/category/movie.html">Movie</a>
      </li>
      <li >
        <a href="/category/software.html">Software</a>
      </li>
      <li >
        <a href="/category/tech.html">Tech</a>
      </li>
      <li >
        <a href="/category/web.html">Web</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Qt初探</h1>
    <p class="meta">
<time datetime="2021-04-28T17:00:00+08:00" pubdate>Wed 28 April 2021</time>    </p>
</header>

  <div class="entry-content"><h1>Q对象</h1>
<h3>QT 窗口类</h3>
<p>QWidget：所有用户接口对象的基类</p>
<p>最上层的widget（top-level widget）是一个独立的窗口，有<code>setWindowTitle()</code>和<code>setWindowIcon()</code>来设置标题和图标</p>
<p>QListWidgetItem</p>
<p>QListWidgetItem表示QListWidget中的单个项目。 每个项目可以容纳几条信息，并将适当地显示它们。</p>
<h3>文件操作类</h3>
<p>QDir</p>
<p>可以访问目录和文件</p>
<p>QFileInfo：返回符号链接指向的文件或目录的绝对路径；如果对象不是符号链接，则返回空字符串。</p>
<ul>
<li>QFileInfoList</li>
</ul>
<h3>串口通讯相关</h3>
<p>QSerialPort：提供访问串口的方法。可以枚举系统中的所有串口，帮助获取可用的串口，通过setPort()或setPortName()方法，分配所需的串口设备。</p>
<p>QSerialPortInfo：提供可用串口的信息</p>
<p>QIODevice：在QT中所有I/O设备的基本接口类</p>
<h3>消息事件</h3>
<p>QShowEvent：提供了显示小部件时发送的事件</p>
<p>显示事件有两种：</p>
<ul>
<li>窗口系统（自发）引起的显示事件 <a href="../qtcore/qevent.html#spontaneous">QEvent::spontaneous</a>()</li>
<li>内部显示事件</li>
</ul>
<p>自发事件在窗口系统显示窗口之后立即发送；在图标化后重新显示顶级窗口时，也会发送它们。 内部显示事件在窗口小部件变得可见之前传递</p>
<h3>线程相关</h3>
<p>QMutexLocker：简化了互斥锁的锁定和解锁</p>
<p>QThread：提供了一种独立于平台的方式来管理线程。</p>
<h3>数据类型</h3>
<p>QString：提供unicode 字符集的字符串</p>
<ul>
<li>trimmed() //去掉首尾的空格</li>
<li>simplefied() // 去掉首尾，及中间连续的空格用一个空格替换。</li>
</ul>
<p>QByteArray：提供字节数组</p>
<p>QTextCursor：提供一个API访问和修改QTextDocuments</p>
<p>QTextDocument：保存格式化文本</p>
<p>QList： 数组列表</p>
<ul>
<li>inert()</li>
<li>replace()</li>
<li>removeAt()</li>
<li>move()</li>
<li>swap()</li>
<li>append()</li>
<li>prepend()</li>
<li>removeFisrt()</li>
<li>removeLast()</li>
<li>下标索引，或者 at() 函数</li>
</ul>
<p>QLinkedList:</p>
<p>QVector: QVector的函数接口和QList几乎完全相同，QVector<T> 的性能比 QList<T>更高，因为前者的数据项是连续存储的。</p>
<p>QStack:</p>
<p>QQueue:</p>
<p>QStringList</p>
<h3>关联容器：</h3>
<p>QMap</p>
<p>QHash:</p>
<p>QSet:</p>
<p>QVariantHash:</p>
<p>QVariantList:</p>
<p>QVariantMap:Synonym for <a href="qmap.html">QMap</a>&lt;<a href="qstring.html">QString</a>, <a href="qvariant.html">QVariant</a>&gt;.</p>
<h1>Q控件</h1>
<p>QLabel:</p>
<p>继承关系：QObject-&gt;QWidget-&gt;QFrame-&gt;QLabel</p>
<h1>一些用法：</h1>
<p>qRegisterMetaType：在信号槽中自定义类型，用qRegisterMetaType对自定义类型进行注册。</p>
<p>使用方法：</p>
<ol>
<li>注册位置：在第一次使用此类链接跨线程的signal/slot之前，一般在当前类的构造函数中进行注册；</li>
<li>注册方法：在当前类的顶部包含 <code>#include&lt;QMetaType&gt;</code>,构造函数中加入代码：<code>qRegisterMetaType&lt;MyClass&gt;("MyClass");</code></li>
<li>Myclass的引用类型需单独注册：<code>qRegisterMetaType&lt;MyClass&gt;("MyClass&amp;");</code></li>
</ol>
<p>Q_NULLPTR</p>
<p>c_str()</p>
<h4>中文字符输出</h4>
<p><strong>qDebug</strong>() &lt;&lt; str.<strong>toStdString</strong>().<strong>c_str</strong>();</p>
<div class="highlight"><pre><span></span><code><span class="n">QString</span> <span class="n">data</span> <span class="o">=</span> <span class="n">QString</span><span class="p">(</span><span class="s">&quot;%1 %2 %3 &quot;</span><span class="p">).</span><span class="n">arg</span><span class="p">(</span><span class="err">“</span><span class="mi">1</span><span class="err">”</span><span class="p">)</span>
            <span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="err">“</span><span class="mi">2</span><span class="err">”</span><span class="p">).</span><span class="n">arg</span><span class="p">(</span><span class="err">“</span><span class="mi">3</span><span class="err">”</span><span class="p">);</span>
<span class="c1">// .arg()完成字符串的格式化</span>
<span class="c1">// .arg(str, length) 所接受的第二个参数，可代表所占宽度</span>
</code></pre></div>


<h5>用于显示中文的宏</h5>
<div class="highlight"><pre><span></span><code><span class="cp">#define tr(s) (QString::fromLocal8Bit(s)) </span><span class="c1">// tr为自定义</span>
</code></pre></div>


<h5>静态函数在给给定时间后执行</h5>
<p>用法：<code>QTimer::singleShot(2*1000, this, &amp;updateGateway::on_pBtn_sendOrder_clicked);</code></p>
<h6>QByteArray 转换为<code>char *</code>类型</h6>
<div class="highlight"><pre><span></span><code><span class="n">QByteArray</span> <span class="n">array</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">pt</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span> <span class="o">*&gt;</span><span class="p">(</span><span class="n">array</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
</code></pre></div>


<h1>QT Cteator</h1>
<h3>编辑器快捷键</h3>
<p><img alt="../images/qt5_1.png" src="../images/qt5_1.png"></p>
<h3>数据类型定义</h3>
<p><img alt="数据类型定义" src="../images/qt5_2.png"></p>
<h1>socket编程</h1>
<p>ReadyRead()信号：</p>
<h3>Windows下Qt使用htons, htonl, ntohs, ntohl</h3>
<ol>
<li><code>pro文件</code>加上：<code>LIBS += -lws2_32</code> </li>
<li>源代码包含头文件：<code>#include &lt;winsock2.h&gt;</code></li>
</ol>
<p><a href="https://blog.csdn.net/Kk_01110001B/article/details/90731792">【socket编程为什么需要htons(), ntohl(), ntohs()，htons() 函数】</a></p>
<h2>toggled 与 triggered 信号的区别</h2>
<ul>
<li>toggle在实物上有开关的意思，两头表示两个状态：开和关。</li>
<li>使用该信号的控件需要将setCheckalbe属性设置为true;</li>
<li>trigger 有触发的意思，一次性的，点击后无法改变状态。</li>
</ul>
<h1>Qt控件</h1>
<p>QLabel</p>
<p>对齐方式：</p>
<ul>
<li>获取对齐方式：Qt::Alignment alignment() const;</li>
<li>设置对齐方式：void setAlignment(Qt::Alignment align);</li>
</ul>
<p>对齐的取值：</p>
<ol>
<li>Qt::AlignLeft: 左对齐</li>
<li>Qt::AlignRight: 右对齐</li>
<li>Qt::AlignHCenter: 水平居中</li>
<li>Qt::AlignJustify: 水平方向，两端对齐</li>
<li>Qt::AlignTop: 居上对齐</li>
<li>Qt::AlignButton: 居下对齐</li>
<li>Qt::AlignVCenter: 垂直方向，居中</li>
<li>Qt::AlignCenter: 水平，垂直方向居中</li>
</ol>
<p>按键捕获：</p>
<p>Qt中的回车键对应两个键值：Qt::Key_Enter、Qt::Key_Return。</p>
<h1>Qt软件打包发布</h1>
<h5>qt软件发布步骤</h5>
<h6>方法一、猛糙狠的发布方式，屡试不爽。</h6>
<ol>
<li>在Qt creator中运行release 模式，将生成的二进制可执行程序(.exe)复制到新的空文件夹中；</li>
<li>运行Qt的命令行模式<br><img alt="image-20210507105453145" src="../images/image-20210507105453145.png"></li>
<li>进入到放置二进制可执行程序的空文件中，执行<code>windeployqt  xxx.exe</code> <em>该命令可将运行该程序依赖的Qt dll文件加载过来</em></li>
<li>将该文件夹压缩后即可发布出去。</li>
</ol></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        leelongcrazy
    </span>
  </span>
<time datetime="2021-04-28T17:00:00+08:00" pubdate>Wed 28 April 2021</time>  <span class="categories">
    <a class='category' href='/category/cpp.html'>Cpp</a>
  </span>
  <span class="categories">
    <a class="category" href="/tag/programe.html">Programe</a>,    <a class="category" href="/tag/qt.html">Qt</a>,    <a class="category" href="/tag/c.html">C++</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/qtkai-fa-zhong-yu-dao-de-wen-ti.html">Qt开发中遇到的问题</a>
      </li>
      <li class="post">
          <a href="/qtchu-tan.html">Qt初探</a>
      </li>
      <li class="post">
          <a href="/wang-luo-shou-ji.html">网络收集</a>
      </li>
      <li class="post">
          <a href="/vbsjiao-ben-xue-xi.html">VBS脚本学习</a>
      </li>
      <li class="post">
          <a href="/vimduo-wen-jian-bian-ji.html">vim多文件编辑</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="/category/article.html">Article</a></li>
        <li><a href="/category/books.html">Books</a></li>
        <li><a href="/category/cpp.html">Cpp</a></li>
        <li><a href="/category/import.html">Import</a></li>
        <li><a href="/category/it.html">IT</a></li>
        <li><a href="/category/movie.html">Movie</a></li>
        <li><a href="/category/software.html">Software</a></li>
        <li><a href="/category/tech.html">Tech</a></li>
        <li><a href="/category/web.html">Web</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="/tag/programe.html">Programe</a>,    <a href="/tag/qt.html">Qt</a>,    <a href="/tag/c.html">C++</a>,    <a href="/tag/edu.html">Edu</a>,    <a href="/tag/vim.html">Vim</a>,    <a href="/tag/linux.html">Linux</a>,    <a href="/tag/websec.html">WebSec</a>,    <a href="/tag/pwn.html">PWN</a>,    <a href="/tag/mfc.html">MFC</a>,    <a href="/tag/tech.html">Tech</a>,    <a href="/tag/vue.html">VUE</a>,    <a href="/tag/bash.html">Bash</a>,    <a href="/tag/zsh.html">zsh</a>,    <a href="/tag/github.html">Github</a>,    <a href="/tag/git.html">Git</a>,    <a href="/tag/os.html">os</a>,    <a href="/tag/python.html">Python</a>,    <a href="/tag/code.html">Code</a>,    <a href="/tag/iot.html">Iot</a>,    <a href="/tag/ai.html">AI</a>,    <a href="/tag/movie.html">Movie</a>,    <a href="/tag/article.html">Article</a>,    <a href="/tag/it.html">it</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://github.com/leelongcrazy" target="_blank">Github</a></li>
            <li><a href="https://twitter.com/leelongcrazy" target="_blank">Twitter</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://leelongcrazy.com" target="_blank">LeeLongCrazy</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2017&ndash;2021  leelongcrazy &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
</body>
</html>